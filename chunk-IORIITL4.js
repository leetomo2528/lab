import{A as ne,B as oe,C as le,E as ae,F as se,G as re,H as ce,a as D,b as W,c as F,e as O,f as L,g as N,h as q,i as U,k as H,l as j,m as z,n as K,o as G,p as J,q as Q,r as R,s as X,t as Y,u as Z,v as $,w as ee,y as te,z as ie}from"./chunk-OSINEEBT.js";import"./chunk-ARU4HPLL.js";import"./chunk-QUJFQN2Y.js";import"./chunk-TPFNQOOQ.js";import"./chunk-VLDBEIR4.js";import"./chunk-NICCS44U.js";import"./chunk-NQS77BVS.js";import"./chunk-25U5AJKM.js";import"./chunk-7XOPJKU4.js";import"./chunk-7FY2OE2O.js";import"./chunk-Y3FFGH25.js";import"./chunk-7RRA5RZJ.js";import"./chunk-XS7MKLAB.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-YVEFWQO5.js";import"./chunk-CKP3SGE2.js";import"./chunk-OT5ALWV6.js";import{B as g,C as o,D as l,E as b,K as A,L as _,M as s,Pa as v,Qa as V,Ta as P,U as r,V as M,X as k,Y as p,Z as h,_ as C,da as E,ea as B,ga as T,j as d,k as m,q as a,r as S,t as y,x as f}from"./chunk-J3J7XIIW.js";import"./chunk-FQIJAO3W.js";import"./chunk-SJRI2R4M.js";import"./chunk-CBSRM6FI.js";import"./chunk-VCPEU5KF.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as w,e as x}from"./chunk-JHI3MBHO.js";function me(c,u){if(c&1){let n=A();o(0,"ion-item")(1,"ion-checkbox",14),_("ionChange",function(){let e=d(n).$implicit,i=s();return m(i.toggleItemSelection(e.id))}),l(),o(2,"ion-label",3),_("click",function(){let e=d(n).$implicit,i=s();return m(i.editItem(e))}),o(3,"h2"),r(4),l(),o(5,"p"),r(6),l()()()}if(c&2){let n=u.$implicit,t=s();a(),g("checked",t.selectedItemIds.includes(n.id)),a(3),M(n.name),a(2),k("\uC218\uB7C9: ",n.quantity," | \uC704\uCE58: ",n.location)}}function _e(c,u){if(c&1){let n=A();o(0,"div")(1,"ion-item")(2,"ion-input",17),C("ngModelChange",function(e){d(n);let i=s(2);return h(i.selectedItem.name,e)||(i.selectedItem.name=e),m(e)}),l()(),o(3,"ion-item")(4,"ion-input",18),C("ngModelChange",function(e){d(n);let i=s(2);return h(i.selectedItem.category,e)||(i.selectedItem.category=e),m(e)}),l()(),o(5,"ion-item")(6,"ion-input",19),C("ngModelChange",function(e){d(n);let i=s(2);return h(i.selectedItem.location,e)||(i.selectedItem.location=e),m(e)}),l()(),o(7,"ion-item")(8,"ion-input",20),C("ngModelChange",function(e){d(n);let i=s(2);return h(i.selectedItem.quantity,e)||(i.selectedItem.quantity=e),m(e)}),l()(),o(9,"ion-item")(10,"ion-toggle",21),C("ngModelChange",function(e){d(n);let i=s(2);return h(i.selectedItem.isAvailable,e)||(i.selectedItem.isAvailable=e),m(e)}),r(11,"\uC0AC\uC6A9 \uAC00\uB2A5"),l()(),o(12,"ion-item")(13,"ion-textarea",22),C("ngModelChange",function(e){d(n);let i=s(2);return h(i.selectedItem.description,e)||(i.selectedItem.description=e),m(e)}),l()()()}if(c&2){let n=s(2);a(2),p("ngModel",n.selectedItem.name),a(2),p("ngModel",n.selectedItem.category),a(2),p("ngModel",n.selectedItem.location),a(2),p("ngModel",n.selectedItem.quantity),a(2),p("ngModel",n.selectedItem.isAvailable),a(3),p("ngModel",n.selectedItem.description)}}function ue(c,u){if(c&1){let n=A();o(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),r(3,"\uC544\uC774\uD15C \uC218\uC815"),l(),o(4,"ion-buttons",2)(5,"ion-button",3),_("click",function(){d(n);let e=s();return m(e.closeModal())}),r(6,"\uB2EB\uAE30"),l()()()(),o(7,"ion-content",5),f(8,_e,14,6,"div",15),l(),o(9,"ion-footer")(10,"ion-toolbar")(11,"ion-buttons",2)(12,"ion-button",3),_("click",function(){d(n);let e=s();return m(e.closeModal())}),r(13,"\uCDE8\uC18C"),l(),o(14,"ion-button",16),_("click",function(){d(n);let e=s();return m(e.saveItem())}),r(15,"\uC800\uC7A5"),l()()()()}if(c&2){let n=s();a(8),g("ngIf",n.selectedItem),a(6),g("strong",!0)}}var Ae=(()=>{let u=class u{constructor(t,e){this.apiService=t,this.alertController=e,this.items=[],this.selectedItem=null,this.isModalOpen=!1,this.fileToUpload=null,this.selectedItemIds=[],this.isAllSelected=!1}ngOnInit(){this.loadItems()}loadItems(){this.apiService.getItems().subscribe(t=>{this.items=t,this.selectedItemIds=[],this.isAllSelected=!1})}toggleItemSelection(t){let e=this.selectedItemIds.indexOf(t);e>-1?this.selectedItemIds.splice(e,1):this.selectedItemIds.push(t),this.isAllSelected=this.selectedItemIds.length===this.items.length&&this.items.length>0}toggleSelectAll(){this.isAllSelected=!this.isAllSelected,this.isAllSelected?this.selectedItemIds=this.items.map(t=>t.id):this.selectedItemIds=[]}deleteSelectedItems(){return x(this,null,function*(){if(this.selectedItemIds.length===0){this.presentAlert("\uC54C\uB9BC","\uC0AD\uC81C\uD560 \uC544\uC774\uD15C\uC744 \uC120\uD0DD\uD574\uC8FC\uC138\uC694.");return}yield(yield this.alertController.create({header:"\uD655\uC778",message:`\uC120\uD0DD\uB41C ${this.selectedItemIds.length}\uAC1C\uC758 \uC544\uC774\uD15C\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`,buttons:[{text:"\uCDE8\uC18C",role:"cancel"},{text:"\uC0AD\uC81C",handler:()=>{this.apiService.deleteItems(this.selectedItemIds).subscribe({next:e=>{this.presentAlert("\uC131\uACF5",e.message),this.loadItems()},error:e=>{this.presentAlert("\uC0AD\uC81C \uC2E4\uD328","\uC544\uC774\uD15C \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."),console.error(e)}})}}]})).present()})}editItem(t){this.selectedItem=w({},t),this.isModalOpen=!0}saveItem(){this.selectedItem&&this.apiService.updateItem(this.selectedItem).subscribe(t=>{let e=this.items.findIndex(i=>i.id===t.id);e!==-1&&(this.items[e]=t),this.closeModal()})}closeModal(){this.isModalOpen=!1,this.selectedItem=null}handleFileInput(t){this.fileToUpload=t.target.files[0]}uploadFile(){return x(this,null,function*(){if(!this.fileToUpload){this.presentAlert("\uC624\uB958","\uC5C5\uB85C\uB4DC\uD560 \uD30C\uC77C\uC744 \uBA3C\uC800 \uC120\uD0DD\uD574\uC8FC\uC138\uC694.");return}this.apiService.uploadExcel(this.fileToUpload).subscribe({next:t=>{this.presentAlert("\uC131\uACF5",t.message),this.loadItems()},error:t=>{this.presentAlert("\uC5C5\uB85C\uB4DC \uC2E4\uD328","\uD30C\uC77C\uC744 \uCC98\uB9AC\uD558\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."),console.error(t)}})})}presentAlert(t,e){return x(this,null,function*(){yield(yield this.alertController.create({header:t,message:e,buttons:["OK"]})).present()})}};u.\u0275fac=function(e){return new(e||u)(S(ce),S(se))},u.\u0275cmp=y({type:u,selectors:[["app-admin"]],decls:30,vars:4,consts:[["slot","start"],["default-href","home"],["slot","end"],[3,"click"],["name","refresh","slot","icon-only"],[1,"ion-padding"],["type","file","accept",".xlsx, .xls",3,"change"],["expand","block",1,"ion-margin-top",3,"click"],["labelPlacement","end",3,"ionChange","checked"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","danger",3,"click","disabled"],["name","trash"],[3,"didDismiss","isOpen"],["slot","start",3,"ionChange","checked"],[4,"ngIf"],["color","primary",3,"click","strong"],["label","\uC774\uB984","label-placement","stacked",3,"ngModelChange","ngModel"],["label","\uCE74\uD14C\uACE0\uB9AC","label-placement","stacked",3,"ngModelChange","ngModel"],["label","\uC704\uCE58","label-placement","stacked",3,"ngModelChange","ngModel"],["label","\uC218\uB7C9","label-placement","stacked","type","number",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["label","\uC124\uBA85","label-placement","stacked",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(o(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),b(3,"ion-back-button",1),l(),o(4,"ion-title"),r(5,"\uAD00\uB9AC\uC790 \uD398\uC774\uC9C0"),l(),o(6,"ion-buttons",2)(7,"ion-button",3),_("click",function(){return i.loadItems()}),b(8,"ion-icon",4),l()()()(),o(9,"ion-content",5)(10,"ion-card")(11,"ion-card-header")(12,"ion-card-title"),r(13,"\uC5D1\uC140\uB85C \uB300\uB7C9 \uB4F1\uB85D"),l()(),o(14,"ion-card-content")(15,"input",6),_("change",function(de){return i.handleFileInput(de)}),l(),o(16,"ion-button",7),_("click",function(){return i.uploadFile()}),r(17,"\uC5C5\uB85C\uB4DC"),l()()(),o(18,"ion-list-header")(19,"ion-label"),r(20,"\uC544\uC774\uD15C \uBAA9\uB85D"),l(),o(21,"ion-checkbox",8),_("ionChange",function(){return i.toggleSelectAll()}),r(22,"\uC804\uCCB4 \uC120\uD0DD"),l()(),o(23,"ion-list"),f(24,me,7,4,"ion-item",9),l(),o(25,"ion-fab",10)(26,"ion-fab-button",11),_("click",function(){return i.deleteSelectedItems()}),b(27,"ion-icon",12),l()(),o(28,"ion-modal",13),_("didDismiss",function(){return i.closeModal()}),f(29,ue,16,2,"ng-template"),l()()),e&2&&(a(21),g("checked",i.isAllSelected),a(3),g("ngForOf",i.items),a(2),g("disabled",i.selectedItemIds.length===0),a(2),g("isOpen",i.isModalOpen))},dependencies:[re,O,L,N,q,U,H,j,z,K,G,J,Q,R,X,Y,Z,$,ee,te,ie,ne,oe,ae,D,W,F,le,T,E,B,P,v,V],encapsulation:2});let c=u;return c})();export{Ae as AdminPage};
